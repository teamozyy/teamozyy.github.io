<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>spring boot多数据源</title>
    <url>/2019/11/29/spring-boot%E5%A4%9A%E6%95%B0%E6%8D%AE%E6%BA%90/</url>
    <content><![CDATA[<h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><p>随着数据量的不断增多，单个数据库已经承受不了高并发带来的压力，此时使用多个数据库变得至关重要，传统项目整合多数据源有两种方案: AOP动态切换和分包配置数据源</p>
<h2 id="分包实现"><a href="#分包实现" class="headerlink" title="分包实现"></a>分包实现</h2><h4 id="在application-yml中配置多个数据源"><a href="#在application-yml中配置多个数据源" class="headerlink" title="在application.yml中配置多个数据源"></a>在application.yml中配置多个数据源</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">spring:</span></pre></td></tr><tr><td class="code"><pre><span class="line">  datasource:</span></pre></td></tr><tr><td class="code"><pre><span class="line">    master:</span></pre></td></tr><tr><td class="code"><pre><span class="line">      driver-class-name: com.mysql.cj.jdbc.Driver</span></pre></td></tr><tr><td class="code"><pre><span class="line">      url: jdbc:mysql:&#x2F;&#x2F;47.98.131.17:3306&#x2F;ruoyi1?useUnicode&#x3D;true&amp;characterEncoding&#x3D;utf8&amp;zeroDateTimeBehavior&#x3D;convertToNull&amp;useSSL&#x3D;true&amp;serverTimezone&#x3D;GMT%2B8</span></pre></td></tr><tr><td class="code"><pre><span class="line">      username: root</span></pre></td></tr><tr><td class="code"><pre><span class="line">      password: root</span></pre></td></tr><tr><td class="code"><pre><span class="line">    deputy:</span></pre></td></tr><tr><td class="code"><pre><span class="line">      driver-class-name: com.mysql.cj.jdbc.Driver</span></pre></td></tr><tr><td class="code"><pre><span class="line">      url: jdbc:mysql:&#x2F;&#x2F;47.98.131.17:3306&#x2F;ruoyi2?useUnicode&#x3D;true&amp;characterEncoding&#x3D;utf8&amp;zeroDateTimeBehavior&#x3D;convertToNull&amp;useSSL&#x3D;true&amp;serverTimezone&#x3D;GMT%2B8</span></pre></td></tr><tr><td class="code"><pre><span class="line">      username: root</span></pre></td></tr><tr><td class="code"><pre><span class="line">      password: root</span></pre></td></tr></table></figure>
]]></content>
      <tags>
        <tag>mybatis</tag>
      </tags>
  </entry>
  <entry>
    <title>swagger使用指南</title>
    <url>/2019/11/29/swagger%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97/</url>
    <content><![CDATA[<h2 id="什么是swgaaer"><a href="#什么是swgaaer" class="headerlink" title="什么是swgaaer"></a>什么是swgaaer</h2><p>swagger是一个功能简单但强大的API工具，可以非常友好的对外展示接口，以及接口文档的生成</p>
<h2 id="基本配置"><a href="#基本配置" class="headerlink" title="基本配置"></a>基本配置</h2><h4 id="maven配置依赖"><a href="#maven配置依赖" class="headerlink" title="maven配置依赖"></a>maven配置依赖</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;dependency&gt;</span></pre></td></tr><tr><td class="code"><pre><span class="line">	&lt;groupId&gt;io.springfox&lt;&#x2F;groupId&gt;</span></pre></td></tr><tr><td class="code"><pre><span class="line">	&lt;artifactId&gt;springfox-swagger-ui&lt;&#x2F;artifactId&gt;</span></pre></td></tr><tr><td class="code"><pre><span class="line">	&lt;version&gt;2.5.0&lt;&#x2F;version&gt;</span></pre></td></tr><tr><td class="code"><pre><span class="line">&lt;&#x2F;dependency&gt;</span></pre></td></tr><tr><td class="code"><pre><span class="line">&lt;dependency&gt;</span></pre></td></tr><tr><td class="code"><pre><span class="line">	&lt;groupId&gt;io.springfox&lt;&#x2F;groupId&gt;</span></pre></td></tr><tr><td class="code"><pre><span class="line">	&lt;artifactId&gt;springfox-swagger2&lt;&#x2F;artifactId&gt;</span></pre></td></tr><tr><td class="code"><pre><span class="line">	&lt;version&gt;2.5.0&lt;&#x2F;version&gt;</span></pre></td></tr><tr><td class="code"><pre><span class="line">&lt;&#x2F;dependency&gt;</span></pre></td></tr></table></figure>

<h4 id="编写swagger配置类"><a href="#编写swagger配置类" class="headerlink" title="编写swagger配置类"></a>编写swagger配置类</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">@Configuration</span></pre></td></tr><tr><td class="code"><pre><span class="line">@EnableSwagger2</span></pre></td></tr><tr><td class="code"><pre><span class="line">public class SwaggerConfig &#123;</span></pre></td></tr><tr><td class="code"><pre><span class="line">    &#x2F;**</span></pre></td></tr><tr><td class="code"><pre><span class="line">     * 创建API应用</span></pre></td></tr><tr><td class="code"><pre><span class="line">     * apiInfo() 增加API相关信息</span></pre></td></tr><tr><td class="code"><pre><span class="line">     * 通过select()函数返回一个ApiSelectorBuilder实例,用来控制哪些接口暴露给Swagger来展现，</span></pre></td></tr><tr><td class="code"><pre><span class="line">     * 本例采用指定扫描的包路径来定义指定要建立API的目录。</span></pre></td></tr><tr><td class="code"><pre><span class="line">     *</span></pre></td></tr><tr><td class="code"><pre><span class="line">     * @return</span></pre></td></tr><tr><td class="code"><pre><span class="line">     *&#x2F;</span></pre></td></tr><tr><td class="code"><pre><span class="line">    @Bean</span></pre></td></tr><tr><td class="code"><pre><span class="line">    public Docket createRestApi() &#123;</span></pre></td></tr><tr><td class="code"><pre><span class="line">        return new Docket(DocumentationType.SWAGGER_2)</span></pre></td></tr><tr><td class="code"><pre><span class="line">                .apiInfo(apiInfo())</span></pre></td></tr><tr><td class="code"><pre><span class="line">                &#x2F;&#x2F; 选择那些路径和api会生成document</span></pre></td></tr><tr><td class="code"><pre><span class="line">                .select()</span></pre></td></tr><tr><td class="code"><pre><span class="line">                &#x2F;&#x2F; 扫描所有有注解的api，用这种方式更灵活</span></pre></td></tr><tr><td class="code"><pre><span class="line">                .apis(RequestHandlerSelectors.withMethodAnnotation(ApiOperation.class))</span></pre></td></tr><tr><td class="code"><pre><span class="line">                &#x2F;&#x2F;swagget扫描目录</span></pre></td></tr><tr><td class="code"><pre><span class="line">                &#x2F;&#x2F;.apis(RequestHandlerSelectors.basePackage(&quot;com.itcast.controller&quot;))</span></pre></td></tr><tr><td class="code"><pre><span class="line">                &#x2F;&#x2F; 对所有路径进行监控</span></pre></td></tr><tr><td class="code"><pre><span class="line">                .paths(PathSelectors.any())</span></pre></td></tr><tr><td class="code"><pre><span class="line">                .build();</span></pre></td></tr><tr><td class="code"><pre><span class="line">    &#125;</span></pre></td></tr><tr><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="code"><pre><span class="line">    &#x2F;**</span></pre></td></tr><tr><td class="code"><pre><span class="line">     * 创建该API的基本信息（这些基本信息会展现在文档页面中）</span></pre></td></tr><tr><td class="code"><pre><span class="line">     * 访问地址：http:&#x2F;&#x2F;项目实际地址&#x2F;swagger-ui.html</span></pre></td></tr><tr><td class="code"><pre><span class="line">     *</span></pre></td></tr><tr><td class="code"><pre><span class="line">     * @return</span></pre></td></tr><tr><td class="code"><pre><span class="line">     *&#x2F;</span></pre></td></tr><tr><td class="code"><pre><span class="line">    private ApiInfo apiInfo() &#123;</span></pre></td></tr><tr><td class="code"><pre><span class="line">        return new ApiInfoBuilder()</span></pre></td></tr><tr><td class="code"><pre><span class="line">                .title(&quot;SpringBoot中使用Swagger2构建RESTful APIs&quot;)</span></pre></td></tr><tr><td class="code"><pre><span class="line">                .description(&quot;API 描述&quot;)</span></pre></td></tr><tr><td class="code"><pre><span class="line">                .termsOfServiceUrl(&quot;&quot;)</span></pre></td></tr><tr><td class="code"><pre><span class="line">                .version(&quot;1.0&quot;)</span></pre></td></tr><tr><td class="code"><pre><span class="line">                .build();</span></pre></td></tr><tr><td class="code"><pre><span class="line">    &#125;</span></pre></td></tr><tr><td class="code"><pre><span class="line">&#125;</span></pre></td></tr></table></figure>

<h4 id="访问地址"><a href="#访问地址" class="headerlink" title="访问地址"></a>访问地址</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">http:&#x2F;&#x2F;$&#123;host&#125;:$&#123;port&#125;&#x2F;swagger-ui.html</span></pre></td></tr></table></figure>
<p><img src="/2019/11/29/swagger%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97/swagger-ui.png" alt></p>
<h2 id="常用注解"><a href="#常用注解" class="headerlink" title="常用注解"></a>常用注解</h2><h4 id="Api-用于类，表示这个类是swagger资源"><a href="#Api-用于类，表示这个类是swagger资源" class="headerlink" title="Api 用于类，表示这个类是swagger资源"></a>Api 用于类，表示这个类是swagger资源</h4><ul>
<li>value 类说明</li>
<li>tags 类分组，同一个tags下的类会分在同一组</li>
</ul>
<h4 id="ApiOperation-用于方法"><a href="#ApiOperation-用于方法" class="headerlink" title="ApiOperation 用于方法"></a>ApiOperation 用于方法</h4><ul>
<li>value 方法描述</li>
<li>notes 提示内容</li>
</ul>
<h4 id="ApiParam-用于参数，方法，字段说明"><a href="#ApiParam-用于参数，方法，字段说明" class="headerlink" title="ApiParam 用于参数，方法，字段说明"></a>ApiParam 用于参数，方法，字段说明</h4><ul>
<li>name 参数名</li>
<li>value 参数说明</li>
<li>required 是否必填</li>
</ul>
<h4 id="ApiModel-用于实体类"><a href="#ApiModel-用于实体类" class="headerlink" title="ApiModel 用于实体类"></a>ApiModel 用于实体类</h4><ul>
<li>value 实体类名</li>
<li>description 描述</li>
</ul>
<h4 id="ApiModelProperty-字段"><a href="#ApiModelProperty-字段" class="headerlink" title="ApiModelProperty 字段"></a>ApiModelProperty 字段</h4><ul>
<li>value 字段说明</li>
<li>name 重写属性名称</li>
<li>dataType 重写属性类型</li>
<li>required 是否必填</li>
<li>example 举例说明</li>
<li>hidden 隐藏</li>
</ul>
<h4 id="ApiImplicitParams-用于方法，可以包含多个-ApiImplicitParam"><a href="#ApiImplicitParams-用于方法，可以包含多个-ApiImplicitParam" class="headerlink" title="ApiImplicitParams 用于方法，可以包含多个@ApiImplicitParam"></a>ApiImplicitParams 用于方法，可以包含多个@ApiImplicitParam</h4><ul>
<li>name 参数名称</li>
<li>value 参数说明</li>
<li>dataType 数据类型</li>
<li>paramType 参数类型</li>
<li>example 举例说明</li>
</ul>
<h2 id="生成接口文档"><a href="#生成接口文档" class="headerlink" title="生成接口文档"></a>生成接口文档</h2><h4 id="修改maven依赖"><a href="#修改maven依赖" class="headerlink" title="修改maven依赖"></a>修改maven依赖</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;dependency&gt;</span></pre></td></tr><tr><td class="code"><pre><span class="line">	&lt;groupId&gt;io.springfox&lt;&#x2F;groupId&gt;</span></pre></td></tr><tr><td class="code"><pre><span class="line">	&lt;artifactId&gt;springfox-swagger2&lt;&#x2F;artifactId&gt;</span></pre></td></tr><tr><td class="code"><pre><span class="line">	&lt;version&gt;2.5.0&lt;&#x2F;version&gt;</span></pre></td></tr><tr><td class="code"><pre><span class="line">&lt;&#x2F;dependency&gt;</span></pre></td></tr><tr><td class="code"><pre><span class="line">&lt;dependency&gt;</span></pre></td></tr><tr><td class="code"><pre><span class="line">    &lt;groupId&gt;com.github.xiaoymin&lt;&#x2F;groupId&gt;</span></pre></td></tr><tr><td class="code"><pre><span class="line">    &lt;artifactId&gt;swagger-bootstrap-ui&lt;&#x2F;artifactId&gt;</span></pre></td></tr><tr><td class="code"><pre><span class="line">    &lt;version&gt;1.9.6&lt;&#x2F;version&gt;</span></pre></td></tr><tr><td class="code"><pre><span class="line">&lt;&#x2F;dependency&gt;</span></pre></td></tr></table></figure>

<h4 id="访问地址-1"><a href="#访问地址-1" class="headerlink" title="访问地址"></a>访问地址</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">http:&#x2F;&#x2F;$&#123;host&#125;:$&#123;port&#125;&#x2F;doc.html</span></pre></td></tr></table></figure>
<p><img src="/2019/11/29/swagger%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97/swagger-bootstrap.png" alt></p>
]]></content>
      <tags>
        <tag>java</tag>
      </tags>
  </entry>
</search>
